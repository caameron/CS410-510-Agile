## source environment and set model root
source /p/hdk/rtl/proj_bin/rtl.rc
setenv MODEL_ROOT $EMUMODELS/pcs_rtl/pcs_rtl-ertl-bxt-a0-latest

## jobs in specific qslot
nbqstat -P emulation slot=/soc/bxt/vjt/pcs/priority

## jobs by user
nbqstat -P emulation user=jkuzniar

## running and waiting jobs
emustatus --target emulation_fm jobs all --sort "Qslot" --fields "Status,Jobid,User,emu_boards_used::4,TimeOnMachine, Qslot::30" "Qslot=~'/soc/bxt' && Status!~'Wait'"
emustatus --target emulation jobs all --sort "Qslot" --fields "Status,Jobid,User,emu_boards_used::4,TimeOnMachine, Qslot::30" "Qslot=~'/soc/bxt' && Status!~'Wait'" | grep Run | wc

emustatus --target emulation jobs all --sort "Qslot" --fields "Status,Jobid,User,emu_boards_used::4,TimeOnMachine, Qslot::30" "Qslot=~'/soc/bxt' && Status!~'Wait'" | grep Run | wc
emustatus --target emulation jobs all --sort "Qslot" --fields "Status,Jobid,User,emu_boards_used::4,TimeOnMachine, Qslot::30" "Qslot=~'/soc/bxt' && Status=~'Wait'" | grep Wait | wc

## job history
nbstatus jobs --target emulation_pdx --fields qslot,jobid,exitstatus,workstation --format csv --history 7D "qslot=~'/soc/bxt' && exitstatus == 0" | grep "/soc/bxt" | grep -v bxtsw | grep -v ylee19 | sort -u | wc

## bxt emulator allocation
nbstatus qslots --target emulation_fm --fields name,allocation,type --format csv "type=~'qslot' && name=~'/soc/bxt'" | grep -v priority | grep -v standard | grep -v bulk | grep -v interactive

## job details
emustatus jobs -view detail 2668231
emustatus jobs -view detail 2668231 | grep emu_boards_used
emustatus jobs -view detail 2107971 | grep Cwd
emustatus jobs -view detail 2668231 | grep -i work
emustatus jobs -view detail 2668231 | grep model

## models being run on
emustatus jobs -view detail --target emulation jobs all --fields qslot,jobid,User,emu_boards,used,TimeOnMachine,workstation --format csv "Qslot=~'/soc/bxt/' && Status!~'Wait'" | grep "model =" | sort

emustatus jobs -view detail --target emulation jobs all --fields User,jobid,Status,SubmitTime,StartTime,DispatchedTime,TimeOnMachine,Cwd,qslot,model,WorkstationFullHostname --format csv "Qslot=~'/soc/bxt/vjt/dfv'"

TimeInRunning = 0h:4m:0s
        TimeInSuspend = 0h:0m:0s
        TimeOnMachine = 0h:3m:27s


## history
emustatus jobs -view historydetail 2107971 | grep Cwd

## permissions
nbstatus permissions --target emulation --fields all --format csv "EntityType=='Qslot' && UserGroup=~'jkuzniar'"
nbstatus qslots --target emulation --fields name,permissions,LockedUsers --format block "name=~'/soc/bxtsw/sw' && type=='qslot'" | more

## remove job
nbqrm -a -P emulation 5014114

## requeue job
nbjob modify --target emulation --queue emulation --qslot /socbxt/vjt/dfv/interactive "jobid=='3848678'"
nbqrm -P emulation -Q /soc/bxt/vjt/pcs/standard <jobid>     <= nbqrm no longer officially supported


## bxt qslots:
/soc/bxt/*                  21
/soc/bxtbig/*               2   (fmev0032,filt2431) 
/bxt_pm_hybrid_dungeon/*    1


## other bxt qslots:
/soc/bxticg         Arts, Maarten from ICG SV 
/soc/bxtsw          PSS, Nag, Harish
/gfx/bxt*           gfx standalone

/nfs/pdx/disks/ccdo.val.work.394/valid/work/bin/fastpath_waitjob.pl 3300497

